create table carts(
cartId bigint primary key auto_increment not null
)

create table favourites(
favId bigint primary key auto_increment not null
)

create table users(
id bigint primary key auto_increment not null,
name varchar(20) not null,
surname varchar(20) not null,
email varchar(40) not null,
password varchar(20) not null,
cartId bigint not null,
favId bigint default null
)

alter table users add foreign key(cartId) references carts(cartId)
alter table users add foreign key(favId) references favourites(favId)

create table shippingAddresses(
addressId bigint primary key auto_increment not null,
cap int not null,
city varchar(20) not null,
street varchar(20) not null,
homeNumber int not null,
userId bigint not null
)

alter table shippingAddresses add foreign key(userId) references users(id)

create table restaurant(
restaurantId int primary key auto_increment not null,
restaurantName varchar(7) not null,
email varchar(40) not null,
password varchar(20) not null,
address varchar(20) not null
)

create table paymentMethods(
paymentId bigint primary key auto_increment not null,
userId bigint not null,
method boolean not null,
cardNumber int DEFAULT NULL,
expirationDate DateTime DEFAULT NULL,
cvv int DEFAULT NULL,
cardHolder varchar(40) DEFAULT NULL
)
alter table paymentMethods add foreign key(userId) references users(id)

create table orders(
orderId bigint primary key auto_increment not null,
creationDate datetime not null,
total float not null,
arrivalTime datetime not null,
couponId bigint DEFAULT NULL,
userId bigint not null,
paymentId bigint not null,
restaurantId int not null
)

alter table orders add foreign key(userId) references users(id)
alter table orders add foreign key(paymentId) references paymentMethods(paymentId)
alter table orders add foreign key(restaurantId) references restaurant(restaurantId)
alter table orders add foreign key(couponId) references coupons(couponId)


create table categories(
categoryId bigint primary key auto_increment not null,
restaurantId int NOT NULL,
categoryName varchar(20) NOT NULL
)
   
alter table categories add foreign key(restaurantId) references restaurant(restaurantId)  

create table products(
productId bigint primary key auto_increment not null,
name varchar(20) not null,
description varchar(100) default null,
price float not null,
categoryId bigint not null
)

alter table products add foreign key(categoryId) references categories(categoryId)


create table reviews(
reviewId bigint primary key auto_increment not null,
stars int default null,
comment varchar(100) default null,
userId bigint not null,
productId bigint not null
)

alter table reviews add foreign key(userId) references users(id)
alter table reviews add foreign key(productId) references products(productId)

create table coupons(
couponId bigint primary key auto_increment not null,
priceCut int not null,
restaurantId int not null
)

alter table coupons add foreign key(restaurantId) references restaurant(restaurantId)

create table product_cart(
productId bigint default null,
cartId bigint default null,
PRIMARY KEY  (productId,cartId)
)

create table order_product(
orderId bigint default null,
productId bigint default null,
PRIMARY KEY  (productId,orderId)
)

create table products_favourites(
favId bigint default null,
productId bigint default null,
PRIMARY KEY  (productId,favId)
)

create table users_coupons(
userId bigint default null,
couponId bigint default null,
PRIMARY KEY  (userId,couponId)
)
